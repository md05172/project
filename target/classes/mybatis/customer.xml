<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="customer">

	<insert id="join">
		INSERT INTO customer
		VALUES (SEQ_CUSTOMER.nextval, #{email}, #{name}, #{phone}, #{password}, #{role})
	</insert>
	
	<resultMap type="Customer" id="customerMap" autoMapping="true">
		<id column="id" property="id" javaType="Long"/>
		
		<!-- javaType은 List처럼 interface가 아니면 안적어줘도 된다 ofType은 제너릭 타입을 적는다 -->
		<!-- collection에 column은 기준점을 적는다 -->
		<collection column="cust_id" property="wish" ofType="Wish" javaType="ArrayList" autoMapping="true">
			<id column="wish_id" property="id" javaType="Long"/>
			<result column="book_id" property="bookId" javaType="Long"/>
		</collection>		
	</resultMap>
	
	<select id="check" resultType="Customer">
		SELECT * FROM customer
        WHERE email = #{email}
	</select>
	
	<insert id="address">
		INSERT INTO address
		VALUES (SEQ_ADDRESS.nextval, #{id}, #{address.apiId}, #{address.postcode}, #{address.roadaddress}, #{address.jibunaddress}, #{address.detailaddress}, #{address.extraaddress})
	</insert>
</mapper>